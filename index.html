<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Boneco dos Peidos ðŸ˜‚</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        #title {
            font-size: 2em;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }
        #boneco {
            font-size: 20em; /* Muito grande */
            cursor: pointer;
            user-select: none;
            transition: transform 0.1s;
        }
        #boneco:active {
            transform: scale(0.95);
        }
        #contador {
            position: absolute;
            top: 20px;
            font-size: 1.5em;
            color: white;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 20px;
        }
        @keyframes shake {
            0% { transform: translate(0); }
            25% { transform: translate(-10px, 10px); }
            50% { transform: translate(10px, -10px); }
            75% { transform: translate(-10px, -10px); }
            100% { transform: translate(0); }
        }
        .shake {
            animation: shake 0.5s;
        }
    </style>
</head>
<body>
    <div id="contador">Peidos soltos: <span id="count">0</span></div>
    <div id="title">Toque no boneco! ðŸ’¨</div>
    <div id="boneco">ðŸ§”</div>

    <script>
        // Telegram Mini App (tela cheia + vibraÃ§Ã£o)
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
        }

        const boneco = document.getElementById('boneco');
        const countEl = document.getElementById('count');
        let count = 0;

        // Array com variaÃ§Ãµes de peidos (diferentes frequÃªncias, duraÃ§Ãµes e tipos de onda)
        const peidos = [
            { freqStart: 180, freqEnd: 60, duration: 0.6, type: 'sawtooth', volume: 0.8 },  // Peido longo e grave
            { freqStart: 250, freqEnd: 80, duration: 0.4, type: 'square', volume: 1 },      // Peido curto e agudo
            { freqStart: 150, freqEnd: 40, duration: 1.0, type: 'sawtooth', volume: 0.7 }, // Peido bem longo
            { freqStart: 300, freqEnd: 100, duration: 0.3, type: 'triangle', volume: 0.9 },// Peido rÃ¡pido
            { freqStart: 200, freqEnd: 50, duration: 0.7, type: 'sine', volume: 0.6 },     // Peido "molhado"
            { freqStart: 220, freqEnd: 70, duration: 0.5, type: 'square', volume: 1 },     // Peido clÃ¡ssico
            { freqStart: 170, freqEnd: 30, duration: 0.8, type: 'sawtooth', volume: 0.85 } // Peido Ã©pico
        ];

        function playRandomFart() {
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            const randomPeido = peidos[Math.floor(Math.random() * peidos.length)];

            const oscillator = audioCtx.createOscillator();
            oscillator.type = randomPeido.type;
            oscillator.frequency.setValueAtTime(randomPeido.freqStart, audioCtx.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(randomPeido.freqEnd, audioCtx.currentTime + randomPeido.duration);

            const gain = audioCtx.createGain();
            gain.gain.setValueAtTime(randomPeido.volume, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + randomPeido.duration);

            oscillator.connect(gain);
            gain.connect(audioCtx.destination);

            oscillator.start();
            oscillator.stop(audioCtx.currentTime + randomPeido.duration);

            // VibraÃ§Ã£o no Telegram
            if (typeof Telegram !== 'undefined' && Telegram.WebApp && Telegram.WebApp.HapticFeedback) {
                Telegram.WebApp.HapticFeedback.impactOccurred('heavy');
            }
        }

        function tocarBoneco() {
            count++;
            countEl.textContent = count;

            // AnimaÃ§Ã£o de tremor
            boneco.classList.add('shake');
            setTimeout(() => boneco.classList.remove('shake'), 500);

            // Toca um peido diferente a cada vez
            playRandomFart();
        }

        // Suporte a toque e clique
        boneco.addEventListener('click', tocarBoneco);
        boneco.addEventListener('touchstart', (e) => {
            e.preventDefault();
            tocarBoneco();
        });
    </script>
</body>
</html>
